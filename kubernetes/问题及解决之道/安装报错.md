## 解决kubernetes启动容器时，容器一直是ContainerCreating不能running

### 表象

```shell
kubectl -f create redis.yaml

kubectl get pod redis

NAME                 READY     STATUS              RESTARTS   AGE
kubetest-8s1rt1   0/1       ContainerCreating   0          12s
```

### 分析

查看pod的日志`kubectl describe pod kubetest-8s1rt1`，里边有一个错误事件

###报错一：image pull failed for registry.access.redhat.com/rhel7/pod-infrastructure:latest, this may be because there are no credentials on this request.  details: (open /etc/docker/certs.d/registry.access.redhat.com/redhat-ca.crt: no such file or directory)

解决方案：

```shell
yum install *rhsm* -y
```

### 报错二：Failed to create pod infra container: ImagePullBackOff; Skipping pod "redis-master-jj6jw_default(fec25a87-cdbe-11e7-ba32-525400cae48b)": Back-off pulling image "registry.access.redhat.com/rhel7/pod-infrastructure:latest

解决方法：试试通过手动下载

```shell
docker pull registry.access.redhat.com/rhel7/pod-infrastructure:latest
```

如果依然报错，可参考下面的方案：

```shell
wget http://mirror.centos.org/centos/7/os/x86_64/Packages/python-rhsm-certificates-1.19.10-1.el7_4.x86_64.rpm

rpm2cpio python-rhsm-certificates-1.19.10-1.el7_4.x86_64.rpm | cpio -iv --to-stdout ./etc/rhsm/ca/redhat-uep.pem | tee /etc/rhsm/ca/redhat-uep.pem
```

这两个命令会生成/etc/rhsm/ca/redhat-uep.pem文件。然后手动下载：

```shell
docker pull registry.access.redhat.com/rhel7/pod-infrastructure:latest
```

