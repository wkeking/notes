## Spring事务传播机制

- **PROPAGATION_REQUIRED (默认)**

支持当前事务，如果当前没有事务，则新建事务
如果当前存在事务，则加入当前事务，合并成一个事务

- **REQUIRES_NEW**

新建事务，如果当前存在事务，则把当前事务挂起
这个方法会独立提交事务，不受调用者的事务影响，父级异常，它也是正常提交

- **NESTED**

如果当前存在事务，它将会成为父级事务的一个子事务，方法结束后并没有提交，只有等父事务结束才提交
如果当前没有事务，则新建事务
如果它异常，父级可以捕获它的异常而不进行回滚，正常提交
但如果父级异常，它必然回滚，这就是和 REQUIRES_NEW 的区别

- **SUPPORTS**

如果当前存在事务，则加入事务
如果当前不存在事务，则以非事务方式运行，这个和不写没区别

- **NOT_SUPPORTED**

以非事务方式运行
如果当前存在事务，则把当前事务挂起

- **MANDATORY**

如果当前存在事务，则运行在当前事务中
如果当前无事务，则抛出异常，也即父级方法必须有事务

- **NEVER**

以非事务方式运行，如果当前存在事务，则抛出异常，即父级方法必须无事务

## 事务挂起

### 某事务挂起之后，任何操作都不在该事务的控制之下

例如： 方法A支持事务，方法B不支持事务。    即PROPAGATION_NOT_SUPPORTED

方法A调用方法B。
在方法A开始运行时，系统为它建立Transaction,方法A中对于数据库的处理操作，会在该Transaction的控制之下。
这时，方法A调用方法B,方法A打开的 Transaction将挂起，方法B中任何数据库操作，都不在该Transaction的管理之下。
当方法B返回，方法A继续运行，之前的Transaction恢复，后面的数据库操作继续在该Transaction的控制之下 提交或回滚。